<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1069.7917px" preserveAspectRatio="none" style="width:1863px;height:1069px;background:#FFFFFF;" version="1.1" viewBox="0 0 1863 1069" width="1863.5417px" zoomAndPan="magnify"><defs/><g><rect fill="#F5F5F5" height="1057.3649" style="stroke:#181818;stroke-width:0.5208333333333334;" width="618.2292" x="1030.7292" y="6.25"/><text fill="#000000" font-family="sans-serif" font-size="16.6667" font-weight="bold" lengthAdjust="spacing" textLength="135.4167" x="1269.5313" y="21.7204">FHIR-Directory</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="5.2083" x="1404.9479" y="22.4574"> </text><rect fill="#FFFFFF" height="845.1497" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="541.6667" y="117.1143"/><rect fill="#FFFFFF" height="248.6816" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="1544.2708" y="172.5993"/><rect fill="#FFFFFF" height="289.8763" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="1544.2708" y="627.4577"/><rect fill="none" height="304.1667" style="stroke:#000000;stroke-width:1.5625;" width="1344.2708" x="461.4583" y="132.7393"/><rect fill="none" height="197.5016" style="stroke:#000000;stroke-width:1.5625;" width="1323.4375" x="471.875" y="232.1126"/><rect fill="none" height="345.3613" style="stroke:#000000;stroke-width:1.5625;" width="1396.3542" x="461.4583" y="587.5977"/><rect fill="none" height="238.6963" style="stroke:#000000;stroke-width:1.5625;" width="1375.5208" x="471.875" y="686.971"/><line style="stroke:#181818;stroke-width:0.5208333333333334;stroke-dasharray:5.0,5.0;" x1="32.2917" x2="32.2917" y1="84.6842" y2="981.014"/><line style="stroke:#181818;stroke-width:0.5208333333333334;stroke-dasharray:5.0,5.0;" x1="546.875" x2="546.875" y1="84.6842" y2="981.014"/><line style="stroke:#181818;stroke-width:0.5208333333333334;stroke-dasharray:5.0,5.0;" x1="1079.6875" x2="1079.6875" y1="84.6842" y2="981.014"/><line style="stroke:#181818;stroke-width:0.5208333333333334;stroke-dasharray:5.0,5.0;" x1="1194.2708" x2="1194.2708" y1="84.6842" y2="981.014"/><line style="stroke:#181818;stroke-width:0.5208333333333334;stroke-dasharray:5.0,5.0;" x1="1548.9583" x2="1548.9583" y1="84.6842" y2="981.014"/><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="47.9167" x="5.2083" y="81.2449">Nutzer</text><ellipse cx="32.2917" cy="14.0625" fill="#E3E3E3" rx="8.3333" ry="8.3333" style="stroke:#181818;stroke-width:0.5208333333333334;"/><path d="M32.2917,22.3958 L32.2917,50.5208 M18.75,30.7292 L45.8333,30.7292 M32.2917,50.5208 L18.75,66.1458 M32.2917,50.5208 L45.8333,66.1458 " fill="none" style="stroke:#181818;stroke-width:0.5208333333333334;"/><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="47.9167" x="5.2083" y="993.5089">Nutzer</text><ellipse cx="32.2917" cy="1005.8024" fill="#E3E3E3" rx="8.3333" ry="8.3333" style="stroke:#181818;stroke-width:0.5208333333333334;"/><path d="M32.2917,1014.1357 L32.2917,1042.2607 M18.75,1022.4691 L45.8333,1022.4691 M32.2917,1042.2607 L18.75,1057.8857 M32.2917,1042.2607 L45.8333,1057.8857 " fill="none" style="stroke:#181818;stroke-width:0.5208333333333334;"/><rect fill="#E3E3E3" height="31.5592" rx="2.6042" ry="2.6042" style="stroke:#181818;stroke-width:0.5208333333333334;" width="129.1667" x="482.2917" y="52.0833"/><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="114.5833" x="489.5833" y="72.9116">FHIR-VZD-Client</text><rect fill="#E3E3E3" height="31.5592" rx="2.6042" ry="2.6042" style="stroke:#181818;stroke-width:0.5208333333333334;" width="129.1667" x="482.2917" y="979.9723"/><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="114.5833" x="489.5833" y="1000.8006">FHIR-VZD-Client</text><rect fill="#E3E3E3" height="31.5592" rx="2.6042" ry="2.6042" style="stroke:#181818;stroke-width:0.5208333333333334;" width="90.625" x="1034.8958" y="52.0833"/><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="76.0417" x="1042.1875" y="72.9116">FHIR-Proxy</text><rect fill="#E3E3E3" height="31.5592" rx="2.6042" ry="2.6042" style="stroke:#181818;stroke-width:0.5208333333333334;" width="90.625" x="1034.8958" y="979.9723"/><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="76.0417" x="1042.1875" y="1000.8006">FHIR-Proxy</text><rect fill="#E3E3E3" height="31.5592" rx="2.6042" ry="2.6042" style="stroke:#181818;stroke-width:0.5208333333333334;" width="116.6667" x="1135.9375" y="52.0833"/><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="102.0833" x="1143.2292" y="72.9116">FHIR-Directory</text><rect fill="#E3E3E3" height="31.5592" rx="2.6042" ry="2.6042" style="stroke:#181818;stroke-width:0.5208333333333334;" width="116.6667" x="1135.9375" y="979.9723"/><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="102.0833" x="1143.2292" y="1000.8006">FHIR-Directory</text><rect fill="#E3E3E3" height="31.5592" rx="2.6042" ry="2.6042" style="stroke:#181818;stroke-width:0.5208333333333334;" width="190.625" x="1454.1667" y="52.0833"/><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="176.0417" x="1461.4583" y="72.9116">FHIR-VZD-Administration</text><rect fill="#E3E3E3" height="31.5592" rx="2.6042" ry="2.6042" style="stroke:#181818;stroke-width:0.5208333333333334;" width="190.625" x="1454.1667" y="979.9723"/><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="176.0417" x="1461.4583" y="1000.8006">FHIR-VZD-Administration</text><rect fill="#FFFFFF" height="845.1497" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="541.6667" y="117.1143"/><rect fill="#FFFFFF" height="248.6816" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="1544.2708" y="172.5993"/><rect fill="#FFFFFF" height="289.8763" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="1544.2708" y="627.4577"/><polygon fill="#181818" points="529.1667,112.9476,539.5833,117.1143,529.1667,121.2809,533.3333,117.1143" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="32.2917" x2="535.4167" y1="117.1143" y2="117.1143"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="39.5833" y="111.8373">[01]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="227.0833" x="75" y="111.8373">Öffne Administration GUI im Client</text><path d="M461.4583,132.7393 L1043.75,132.7393 L1043.75,140.1693 L1033.3333,150.5859 L461.4583,150.5859 L461.4583,132.7393 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5625;"/><rect fill="none" height="304.1667" style="stroke:#000000;stroke-width:1.5625;" width="1344.2708" x="461.4583" y="132.7393"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="535.4167" x="477.0833" y="146.3506">Lese alle Verlinkungsanfragen, die auf Approval durch Nutzer warten</text><polygon fill="#181818" points="1531.7708,168.4326,1542.1875,172.5993,1531.7708,176.766,1535.9375,172.5993" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="552.0833" x2="1538.0208" y1="172.5993" y2="172.5993"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="559.375" y="167.3223">[02]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="187.5" x="594.7917" y="167.3223">getPersonInstitutionLinks {}</text><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="1554.6875" x2="1598.4375" y1="202.946" y2="202.946"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="1598.4375" x2="1598.4375" y1="202.946" y2="216.4876"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="1555.7292" x2="1598.4375" y1="216.4876" y2="216.4876"/><polygon fill="#181818" points="1566.1458,212.321,1555.7292,216.4876,1566.1458,220.6543,1561.9792,216.4876" style="stroke:#181818;stroke-width:1.0416666666666667;"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="1561.9792" y="197.669">[03]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="166.6667" x="1597.3958" y="197.669">prüfe owner-accesstoken</text><path d="M471.875,232.1126 L538.5417,232.1126 L538.5417,239.5426 L528.125,249.9593 L471.875,249.9593 L471.875,232.1126 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5625;"/><rect fill="none" height="197.5016" style="stroke:#000000;stroke-width:1.5625;" width="1323.4375" x="471.875" y="232.1126"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="19.7917" x="487.5" y="245.724">alt</text><text fill="#000000" font-family="sans-serif" font-size="11.4583" font-weight="bold" lengthAdjust="spacing" textLength="145.8333" x="554.1667" y="244.8318">[accesstoken is valid]</text><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="1554.6875" x2="1598.4375" y1="271.9727" y2="271.9727"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="1598.4375" x2="1598.4375" y1="271.9727" y2="285.5143"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="1555.7292" x2="1598.4375" y1="285.5143" y2="285.5143"/><polygon fill="#181818" points="1566.1458,281.3477,1555.7292,285.5143,1566.1458,289.681,1561.9792,285.5143" style="stroke:#181818;stroke-width:1.0416666666666667;"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="1561.9792" y="266.6957">[04]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="185.4167" x="1597.3958" y="266.6957">Lesen der Verlinkungsdaten</text><polygon fill="#181818" points="563.5417,327.4577,553.125,331.6243,563.5417,335.791,559.375,331.6243" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;stroke-dasharray:2.0,2.0;" x1="557.2917" x2="1543.2292" y1="331.6243" y2="331.6243"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="569.7917" y="318.4657">[05]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="85.4167" x="605.2083" y="310.584">HTTP 200 OK</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="119.7917" x="605.2083" y="326.3474">(Result Body json)</text><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="552.0833" x2="595.8333" y1="361.971" y2="361.971"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="595.8333" x2="595.8333" y1="361.971" y2="375.5127"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="553.125" x2="595.8333" y1="375.5127" y2="375.5127"/><polygon fill="#181818" points="563.5417,371.346,553.125,375.5127,563.5417,379.6794,559.375,375.5127" style="stroke:#181818;stroke-width:1.0416666666666667;"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="559.375" y="356.694">[06]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="472.9167" x="594.7917" y="356.694">Filtern nach Verlinkungsanfragen, die auf Approval durch Nutzer warten</text><line style="stroke:#000000;stroke-width:1.0416666666666667;stroke-dasharray:2.0,2.0;" x1="471.875" x2="1795.3125" y1="384.8877" y2="384.8877"/><text fill="#000000" font-family="sans-serif" font-size="11.4583" font-weight="bold" lengthAdjust="spacing" textLength="205.2083" x="477.0833" y="395.5236">[owner-accesstoken is invalid]</text><polygon fill="#181818" points="563.5417,417.1143,553.125,421.2809,563.5417,425.4476,559.375,421.2809" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;stroke-dasharray:2.0,2.0;" x1="557.2917" x2="1548.4375" y1="421.2809" y2="421.2809"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="569.7917" y="416.0039">[07]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="62.5" x="605.2083" y="416.0039">HTTP 401</text><polygon fill="#181818" points="43.75,477.8076,33.3333,481.9743,43.75,486.141,39.5833,481.9743" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;stroke-dasharray:2.0,2.0;" x1="37.5" x2="540.625" y1="481.9743" y2="481.9743"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="50" y="468.8156">[08]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="448.9583" x="85.4167" y="460.9339">Anzeige Verlinkungsanfragen, die auf Approval durch Nutzer warten</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="398.9583" x="85.4167" y="476.6973">(kann auch nur ein Hinweis auf offene Anfragen im GUI sein)</text><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="32.2917" x2="76.0417" y1="512.321" y2="512.321"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="76.0417" x2="76.0417" y1="512.321" y2="525.8626"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="33.3333" x2="76.0417" y1="525.8626" y2="525.8626"/><polygon fill="#181818" points="43.75,521.696,33.3333,525.8626,43.75,530.0293,39.5833,525.8626" style="stroke:#181818;stroke-width:1.0416666666666667;"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="39.5833" y="507.044">[09]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="427.0833" x="75" y="507.044">Auswahl der zu Verlinkungsanfragen, die bestätigt werden sollen</text><polygon fill="#181818" points="529.1667,567.806,539.5833,571.9727,529.1667,576.1393,533.3333,571.9727" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="32.2917" x2="535.4167" y1="571.9727" y2="571.9727"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="39.5833" y="558.814">[10]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="134.375" x="75" y="550.9323">Verlinkungsapproval</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="244.7917" x="75" y="566.6957">mit selektierten Verlinkungsanfragen</text><path d="M461.4583,587.5977 L667.7083,587.5977 L667.7083,595.0277 L657.2917,605.4443 L461.4583,605.4443 L461.4583,587.5977 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5625;"/><rect fill="none" height="345.3613" style="stroke:#000000;stroke-width:1.5625;" width="1396.3542" x="461.4583" y="587.5977"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="159.375" x="477.0833" y="601.209">VerlinkungsApproval</text><polygon fill="#181818" points="1531.7708,623.291,1542.1875,627.4577,1531.7708,631.6243,1535.9375,627.4577" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="552.0833" x2="1538.0208" y1="627.4577" y2="627.4577"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="559.375" y="622.1807">[11]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="223.9583" x="594.7917" y="622.1807">approvePersonInstitutionLink {id}</text><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="1554.6875" x2="1598.4375" y1="657.8044" y2="657.8044"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="1598.4375" x2="1598.4375" y1="657.8044" y2="671.346"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="1555.7292" x2="1598.4375" y1="671.346" y2="671.346"/><polygon fill="#181818" points="1566.1458,667.1794,1555.7292,671.346,1566.1458,675.5127,1561.9792,671.346" style="stroke:#181818;stroke-width:1.0416666666666667;"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="1561.9792" y="652.5274">[12]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="166.6667" x="1597.3958" y="652.5274">prüfe owner-accesstoken</text><path d="M471.875,686.971 L538.5417,686.971 L538.5417,694.401 L528.125,704.8177 L471.875,704.8177 L471.875,686.971 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5625;"/><rect fill="none" height="238.6963" style="stroke:#000000;stroke-width:1.5625;" width="1375.5208" x="471.875" y="686.971"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="19.7917" x="487.5" y="700.5824">alt</text><text fill="#000000" font-family="sans-serif" font-size="11.4583" font-weight="bold" lengthAdjust="spacing" textLength="140.625" x="554.1667" y="699.6902">[accesstoken is valid</text><text fill="#000000" font-family="sans-serif" font-size="11.4583" font-weight="bold" lengthAdjust="spacing" textLength="643.75" x="554.1667" y="713.0285">&amp; Verlinkungsanfrage wartet auf Approval durch den Nutzer (telematikID aus dem accesstoken)]</text><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="1554.6875" x2="1598.4375" y1="737.8825" y2="737.8825"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="1598.4375" x2="1598.4375" y1="737.8825" y2="751.4242"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="1555.7292" x2="1598.4375" y1="751.4242" y2="751.4242"/><polygon fill="#181818" points="1566.1458,747.2575,1555.7292,751.4242,1566.1458,755.5908,1561.9792,751.4242" style="stroke:#181818;stroke-width:1.0416666666666667;"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="1561.9792" y="732.6055">[13]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="237.5" x="1597.3958" y="732.6055">Eintragen des Verlinkungsapprovals</text><polygon fill="#181818" points="1205.7292,777.6042,1195.3125,781.7708,1205.7292,785.9375,1201.5625,781.7708" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="1199.4792" x2="1543.2292" y1="781.7708" y2="781.7708"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="1211.9792" y="776.4938">[14]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="289.5833" x="1247.3958" y="776.4938">Eintragung der Verlinkung in die FHIR Daten</text><polygon fill="#181818" points="1531.7708,807.9508,1542.1875,812.1175,1531.7708,816.2842,1535.9375,812.1175" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;stroke-dasharray:2.0,2.0;" x1="1194.2708" x2="1538.0208" y1="812.1175" y2="812.1175"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="1201.5625" y="806.8405">[15]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="85.4167" x="1236.9792" y="806.8405">HTTP 200 OK</text><polygon fill="#181818" points="563.5417,854.0609,553.125,858.2275,563.5417,862.3942,559.375,858.2275" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;stroke-dasharray:2.0,2.0;" x1="557.2917" x2="1543.2292" y1="858.2275" y2="858.2275"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="569.7917" y="845.0689">[16]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="85.4167" x="605.2083" y="837.1872">HTTP 200 OK</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="119.7917" x="605.2083" y="852.9505">(Result Body json)</text><line style="stroke:#000000;stroke-width:1.0416666666666667;stroke-dasharray:2.0,2.0;" x1="471.875" x2="1847.3958" y1="867.6025" y2="867.6025"/><text fill="#000000" font-family="sans-serif" font-size="11.4583" font-weight="bold" lengthAdjust="spacing" textLength="200" x="477.0833" y="878.2384">[owner-accesstoken is invalid</text><text fill="#000000" font-family="sans-serif" font-size="11.4583" font-weight="bold" lengthAdjust="spacing" textLength="569.7917" x="477.0833" y="891.5766">oder Verlinkungsanfrage wartet nicht auf Approval durch den authentisierten Nutzer]</text><polygon fill="#181818" points="563.5417,913.1673,553.125,917.334,563.5417,921.5007,559.375,917.334" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;stroke-dasharray:2.0,2.0;" x1="557.2917" x2="1548.4375" y1="917.334" y2="917.334"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="569.7917" y="912.057">[17]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="62.5" x="605.2083" y="912.057">HTTP 401</text><polygon fill="#181818" points="43.75,958.0973,33.3333,962.264,43.75,966.4307,39.5833,962.264" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="37.5" x2="545.8333" y1="962.264" y2="962.264"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="50" y="956.987">[18]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="195.8333" x="85.4167" y="956.987">Ergebnis Verlinkungsapproval</text><!--MD5=[fe2392875e72b37c78e993b46dbd2dc0]
@startuml SequenceDiagram.FHIR-Directory.linkApproval
skinparam dpi 100
skinparam WrapWidth 200
skinparam monochrome true
autonumber "<b>[00]"

'title "FHIR-Directory, Sequenzdiagram link approval'
actor Nutzer
participant cl as "FHIR-VZD-Client"
box <size:16>FHIR-Directory</size> #WhiteSmoke
  participant fp as "FHIR-Proxy"
  participant fd as "FHIR-Directory"
  participant fa as "FHIR-VZD-Administration"
end box

Nutzer -> cl:Öffne Administration GUI im Client
activate cl


group Lese alle Verlinkungsanfragen, die auf Approval durch Nutzer warten
  cl -> fa: getPersonInstitutionLinks {}
  activate fa
  fa -> fa: prüfe owner-accesstoken

    alt accesstoken is valid
      fa -> fa: Lesen der Verlinkungsdaten
      fa - -> cl: HTTP 200 OK\n(Result Body json)
      cl -> cl: Filtern nach Verlinkungsanfragen, die auf Approval durch Nutzer warten
      
     else owner-accesstoken is invalid
      fa - -> cl: HTTP 401
      deactivate fa
     end
end

cl - -> Nutzer:Anzeige Verlinkungsanfragen, die auf Approval durch Nutzer warten\n(kann auch nur ein Hinweis auf offene Anfragen im GUI sein) 
Nutzer -> Nutzer: Auswahl der zu Verlinkungsanfragen, die bestätigt werden sollen
Nutzer -> cl: Verlinkungsapproval \nmit selektierten Verlinkungsanfragen

group VerlinkungsApproval
  cl -> fa: approvePersonInstitutionLink {id}
  activate fa
  fa -> fa: prüfe owner-accesstoken

    alt accesstoken is valid \n& Verlinkungsanfrage wartet auf Approval durch den Nutzer (telematikID aus dem accesstoken)
      fa -> fa: Eintragen des Verlinkungsapprovals
      fa -> fd: Eintragung der Verlinkung in die FHIR Daten
      fd - -> fa: HTTP 200 OK
      fa - -> cl: HTTP 200 OK\n(Result Body json)
      
     else owner-accesstoken is invalid\noder Verlinkungsanfrage wartet nicht auf Approval durch den authentisierten Nutzer
      fa - -> cl: HTTP 401
      deactivate fa
     end
end

cl -> Nutzer: Ergebnis Verlinkungsapproval

deactivate cl

@enduml

@startuml SequenceDiagram.FHIR-Directory.linkApproval
skinparam dpi 100
skinparam WrapWidth 200
skinparam monochrome true
autonumber "<b>[00]"

actor Nutzer
participant cl as "FHIR-VZD-Client"
box <size:16>FHIR-Directory</size> #WhiteSmoke
  participant fp as "FHIR-Proxy"
  participant fd as "FHIR-Directory"
  participant fa as "FHIR-VZD-Administration"
end box

Nutzer -> cl:Öffne Administration GUI im Client
activate cl


group Lese alle Verlinkungsanfragen, die auf Approval durch Nutzer warten
  cl -> fa: getPersonInstitutionLinks {}
  activate fa
  fa -> fa: prüfe owner-accesstoken

    alt accesstoken is valid
      fa -> fa: Lesen der Verlinkungsdaten
      fa - -> cl: HTTP 200 OK\n(Result Body json)
      cl -> cl: Filtern nach Verlinkungsanfragen, die auf Approval durch Nutzer warten
      
     else owner-accesstoken is invalid
      fa - -> cl: HTTP 401
      deactivate fa
     end
end

cl - -> Nutzer:Anzeige Verlinkungsanfragen, die auf Approval durch Nutzer warten\n(kann auch nur ein Hinweis auf offene Anfragen im GUI sein) 
Nutzer -> Nutzer: Auswahl der zu Verlinkungsanfragen, die bestätigt werden sollen
Nutzer -> cl: Verlinkungsapproval \nmit selektierten Verlinkungsanfragen

group VerlinkungsApproval
  cl -> fa: approvePersonInstitutionLink {id}
  activate fa
  fa -> fa: prüfe owner-accesstoken

    alt accesstoken is valid \n& Verlinkungsanfrage wartet auf Approval durch den Nutzer (telematikID aus dem accesstoken)
      fa -> fa: Eintragen des Verlinkungsapprovals
      fa -> fd: Eintragung der Verlinkung in die FHIR Daten
      fd - -> fa: HTTP 200 OK
      fa - -> cl: HTTP 200 OK\n(Result Body json)
      
     else owner-accesstoken is invalid\noder Verlinkungsanfrage wartet nicht auf Approval durch den authentisierten Nutzer
      fa - -> cl: HTTP 401
      deactivate fa
     end
end

cl -> Nutzer: Ergebnis Verlinkungsapproval

deactivate cl

@enduml

PlantUML version 1.2022.13(Sat Nov 19 13:22:17 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>