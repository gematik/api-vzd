<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="697.9167px" preserveAspectRatio="none" style="width:1112px;height:697px;background:#FFFFFF;" version="1.1" viewBox="0 0 1112 697" width="1112.5px" zoomAndPan="magnify"><defs/><g><rect fill="#F5F5F5" height="685.6344" style="stroke:#181818;stroke-width:0.5208333333333334;" width="334.375" x="582.8125" y="6.25"/><text fill="#000000" font-family="sans-serif" font-size="16.6667" font-weight="bold" lengthAdjust="spacing" textLength="172.9167" x="661.4583" y="22.3633">VZD-FHIR-Directory</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="4.1667" x="834.375" y="23.0225"> </text><rect fill="#FFFFFF" height="533.9478" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="115.1042" y="95.461"/><rect fill="#FFFFFF" height="74.6053" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="416.1458" y="95.461"/><rect fill="#FFFFFF" height="30.5318" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="685.9375" y="362.9557"/><rect fill="#FFFFFF" height="30.5318" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="685.9375" y="472.583"/><rect fill="#FFFFFF" height="30.5318" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="685.9375" y="582.2103"/><rect fill="#FFFFFF" height="74.6053" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="854.1667" y="216.5466"/><rect fill="none" height="95.0439" style="stroke:#000000;stroke-width:1.5625;" width="795.3125" x="10.4167" y="306.7769"/><rect fill="none" height="95.0439" style="stroke:#000000;stroke-width:1.5625;" width="795.3125" x="10.4167" y="416.4042"/><rect fill="none" height="95.0439" style="stroke:#000000;stroke-width:1.5625;" width="795.3125" x="10.4167" y="526.0315"/><line style="stroke:#181818;stroke-width:0.5208333333333334;stroke-dasharray:5.0,5.0;" x1="119.7917" x2="119.7917" y1="62.8459" y2="638.7838"/><line style="stroke:#181818;stroke-width:0.5208333333333334;stroke-dasharray:5.0,5.0;" x1="420.8333" x2="420.8333" y1="62.8459" y2="638.7838"/><line style="stroke:#181818;stroke-width:0.5208333333333334;stroke-dasharray:5.0,5.0;" x1="691.1458" x2="691.1458" y1="62.8459" y2="638.7838"/><line style="stroke:#181818;stroke-width:0.5208333333333334;stroke-dasharray:5.0,5.0;" x1="858.8542" x2="858.8542" y1="62.8459" y2="638.7838"/><rect fill="#E3E3E3" height="48.9339" rx="2.6042" ry="2.6042" style="stroke:#181818;stroke-width:0.5208333333333334;" width="198.9583" x="20.8333" y="12.8703"/><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="184.375" x="28.125" y="34.2611">TI-Messenger-Fachdienst</text><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="147.9167" x="46.3542" y="51.4364">Registrierungsdienst</text><rect fill="#E3E3E3" height="48.9339" rx="2.6042" ry="2.6042" style="stroke:#181818;stroke-width:0.5208333333333334;" width="198.9583" x="20.8333" y="637.7421"/><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="184.375" x="28.125" y="659.1329">TI-Messenger-Fachdienst</text><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="147.9167" x="46.3542" y="676.3082">Registrierungsdienst</text><rect fill="#E3E3E3" height="48.9339" rx="2.6042" ry="2.6042" style="stroke:#181818;stroke-width:0.5208333333333334;" width="113.5417" x="364.5833" y="12.8703"/><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="81.25" x="380.7292" y="34.2611">TI-Provider</text><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="98.9583" x="371.875" y="51.4364">OAuth-Server</text><rect fill="#E3E3E3" height="48.9339" rx="2.6042" ry="2.6042" style="stroke:#181818;stroke-width:0.5208333333333334;" width="113.5417" x="364.5833" y="637.7421"/><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="81.25" x="380.7292" y="659.1329">TI-Provider</text><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="98.9583" x="371.875" y="676.3082">OAuth-Server</text><rect fill="#E3E3E3" height="31.7586" rx="2.6042" ry="2.6042" style="stroke:#181818;stroke-width:0.5208333333333334;" width="208.3333" x="586.9792" y="30.0456"/><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="193.75" x="594.2708" y="51.4364">VZD FHIR TIM-Provider-API</text><rect fill="#E3E3E3" height="31.7586" rx="2.6042" ry="2.6042" style="stroke:#181818;stroke-width:0.5208333333333334;" width="208.3333" x="586.9792" y="637.7421"/><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="193.75" x="594.2708" y="659.1329">VZD FHIR TIM-Provider-API</text><rect fill="#E3E3E3" height="31.7586" rx="2.6042" ry="2.6042" style="stroke:#181818;stroke-width:0.5208333333333334;" width="107.2917" x="805.7292" y="30.0456"/><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="92.7083" x="813.0208" y="51.4364">Auth-Service</text><rect fill="#E3E3E3" height="31.7586" rx="2.6042" ry="2.6042" style="stroke:#181818;stroke-width:0.5208333333333334;" width="107.2917" x="805.7292" y="637.7421"/><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="92.7083" x="813.0208" y="659.1329">Auth-Service</text><rect fill="#FFFFFF" height="533.9478" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="115.1042" y="95.461"/><rect fill="#FFFFFF" height="74.6053" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="416.1458" y="95.461"/><rect fill="#FFFFFF" height="30.5318" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="685.9375" y="362.9557"/><rect fill="#FFFFFF" height="30.5318" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="685.9375" y="472.583"/><rect fill="#FFFFFF" height="30.5318" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="685.9375" y="582.2103"/><rect fill="#FFFFFF" height="74.6053" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="854.1667" y="216.5466"/><polygon fill="#181818" points="403.6458,91.2944,414.0625,95.461,403.6458,99.6277,407.8125,95.461" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="125.5208" x2="409.8958" y1="95.461" y2="95.461"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="29.1667" x="132.8125" y="90.5212">[01]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="242.7083" x="166.1458" y="90.5212">POST /token (client_id, client_secret)</text><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="426.5625" x2="470.3125" y1="125.9928" y2="125.9928"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="470.3125" x2="470.3125" y1="125.9928" y2="139.5345"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="427.6042" x2="470.3125" y1="139.5345" y2="139.5345"/><polygon fill="#181818" points="438.0208,135.3678,427.6042,139.5345,438.0208,143.7012,433.8542,139.5345" style="stroke:#181818;stroke-width:1.0416666666666667;"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="29.1667" x="433.8542" y="121.0531">[02]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="211.4583" x="467.1875" y="121.0531">prüfe client_id und client_secret</text><polygon fill="#181818" points="136.9792,165.8997,126.5625,170.0663,136.9792,174.233,132.8125,170.0663" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;stroke-dasharray:2.0,2.0;" x1="130.7292" x2="420.3125" y1="170.0663" y2="170.0663"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="29.1667" x="143.2292" y="165.1265">[03]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="161.4583" x="176.5625" y="165.1265">ti-provider-accesstoken</text><polygon fill="#181818" points="841.6667,212.38,852.0833,216.5466,841.6667,220.7133,845.8333,216.5466" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="125.5208" x2="847.9167" y1="216.5466" y2="216.5466"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="29.1667" x="132.8125" y="203.6326">[04]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="197.9167" x="166.1458" y="195.6584">GET /ti-provider-authenticate</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="321.875" x="166.1458" y="211.6069">(Authorization: "Bearer ti-provider-accesstoken")</text><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="864.5833" x2="908.3333" y1="247.0785" y2="247.0785"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="908.3333" x2="908.3333" y1="247.0785" y2="260.6201"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="865.625" x2="908.3333" y1="260.6201" y2="260.6201"/><polygon fill="#181818" points="876.0417,256.4535,865.625,260.6201,876.0417,264.7868,871.875,260.6201" style="stroke:#181818;stroke-width:1.0416666666666667;"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="29.1667" x="871.875" y="242.1387">[05]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="200" x="905.2083" y="242.1387">prüfe ti-provider-accesstoken</text><polygon fill="#181818" points="136.9792,286.9853,126.5625,291.1519,136.9792,295.3186,132.8125,291.1519" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;stroke-dasharray:2.0,2.0;" x1="130.7292" x2="858.3333" y1="291.1519" y2="291.1519"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="29.1667" x="143.2292" y="286.2122">[06]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="143.75" x="176.5625" y="286.2122">provider-accesstoken</text><path d="M10.4167,306.7769 L114.5833,306.7769 L114.5833,314.3921 L104.1667,324.8088 L10.4167,324.8088 L10.4167,306.7769 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5625;"/><rect fill="none" height="95.0439" style="stroke:#000000;stroke-width:1.5625;" width="795.3125" x="10.4167" y="306.7769"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="57.2917" x="26.0417" y="320.9106">optional</text><polygon fill="#181818" points="673.4375,358.7891,683.8542,362.9557,673.4375,367.1224,677.6042,362.9557" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="125.5208" x2="679.6875" y1="362.9557" y2="362.9557"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="29.1667" x="132.8125" y="350.0417">[07]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="256.25" x="166.1458" y="342.0675">GET /tim-provider-services/federation</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="298.9583" x="166.1458" y="358.016">(Authorization: "Bearer provider-accesstoken)</text><polygon fill="#181818" points="136.9792,389.3209,126.5625,393.4875,136.9792,397.6542,132.8125,393.4875" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;stroke-dasharray:2.0,2.0;" x1="130.7292" x2="690.1042" y1="393.4875" y2="393.4875"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="29.1667" x="143.2292" y="388.5478">[08]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="309.375" x="176.5625" y="388.5478">HTTP 200 OK Response body domainArray json</text><path d="M10.4167,416.4042 L114.5833,416.4042 L114.5833,424.0194 L104.1667,434.436 L10.4167,434.436 L10.4167,416.4042 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5625;"/><rect fill="none" height="95.0439" style="stroke:#000000;stroke-width:1.5625;" width="795.3125" x="10.4167" y="416.4042"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="57.2917" x="26.0417" y="430.5379">optional</text><polygon fill="#181818" points="673.4375,468.4163,683.8542,472.583,673.4375,476.7497,677.6042,472.583" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="125.5208" x2="679.6875" y1="472.583" y2="472.583"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="29.1667" x="132.8125" y="459.669">[09]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="406.25" x="166.1458" y="451.6947">GET /tim-provider-services/FederationList/federationList.jws</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="298.9583" x="166.1458" y="467.6432">(Authorization: "Bearer provider-accesstoken)</text><polygon fill="#181818" points="136.9792,498.9482,126.5625,503.1148,136.9792,507.2815,132.8125,503.1148" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;stroke-dasharray:2.0,2.0;" x1="130.7292" x2="690.1042" y1="503.1148" y2="503.1148"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="29.1667" x="143.2292" y="498.175">[10]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="316.6667" x="176.5625" y="498.175">HTTP 200 OK Response body federationList json</text><path d="M10.4167,526.0315 L114.5833,526.0315 L114.5833,533.6466 L104.1667,544.0633 L10.4167,544.0633 L10.4167,526.0315 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5625;"/><rect fill="none" height="95.0439" style="stroke:#000000;stroke-width:1.5625;" width="795.3125" x="10.4167" y="526.0315"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="57.2917" x="26.0417" y="540.1652">optional</text><polygon fill="#181818" points="673.4375,578.0436,683.8542,582.2103,673.4375,586.377,677.6042,582.2103" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="125.5208" x2="679.6875" y1="582.2103" y2="582.2103"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="29.1667" x="132.8125" y="569.2963">[11]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="440.625" x="166.1458" y="561.322">GET /tim-provider-services/localization?mxid=[MXID in URL Form]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="298.9583" x="166.1458" y="577.2705">(Authorization: "Bearer provider-accesstoken)</text><polygon fill="#181818" points="136.9792,608.5754,126.5625,612.7421,136.9792,616.9088,132.8125,612.7421" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;stroke-dasharray:2.0,2.0;" x1="130.7292" x2="690.1042" y1="612.7421" y2="612.7421"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="29.1667" x="143.2292" y="607.8023">[12]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="466.6667" x="176.5625" y="607.8023">HTTP 200 OK Response body &lt;enum: [org, pract, orgPract, none]&gt; json</text><!--MD5=[2734b1607d3ae08f449f6c278df74a8c]
@startuml SequenceDiagram.FHIR-Directory.tim_provider_services
skinparam dpi 100
skinparam WrapWidth 200
skinparam monochrome true
autonumber "<b>[00]"

participant rd as "TI-Messenger-Fachdienst\nRegistrierungsdienst"
participant oa as "TI-Provider\nOAuth-Server"
box <size:16>VZD-FHIR-Directory</size> #WhiteSmoke
participant fp as "VZD FHIR TIM-Provider-API"
participant fa as "Auth-Service"
end box

rd -> oa: POST /token (client_id, client_secret)
activate rd
activate oa
oa -> oa: prüfe client_id und client_secret
oa - -> rd: ti-provider-accesstoken
deactivate oa

rd -> fa: GET /ti-provider-authenticate\n(Authorization: "Bearer ti-provider-accesstoken")
activate fa
fa -> fa: prüfe ti-provider-accesstoken
fa - -> rd: provider-accesstoken
deactivate fa

group optional
rd -> fp: GET /tim-provider-services/federation\n(Authorization: "Bearer provider-accesstoken)
activate fp
fp - -> rd: HTTP 200 OK Response body domainArray json
deactivate fp
end
group optional
rd -> fp: GET /tim-provider-services/FederationList/federationList.jws\n(Authorization: "Bearer provider-accesstoken)
activate fp
fp - -> rd: HTTP 200 OK Response body federationList json
deactivate fp
end
group optional
rd -> fp: GET /tim-provider-services/localization?mxid=[MXID in URL Form]\n(Authorization: "Bearer provider-accesstoken)
activate fp
fp - -> rd: HTTP 200 OK Response body <enum: [org, pract, orgPract, none]> json
deactivate fp
end

@enduml

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: de
Country: DE
--></g></svg>