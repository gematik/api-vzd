<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="603.125px" preserveAspectRatio="none" style="width:1648px;height:603px;background:#FFFFFF;" version="1.1" viewBox="0 0 1648 603" width="1648.9583px" zoomAndPan="magnify"><defs/><g><rect fill="#F5F5F5" height="591.569" style="stroke:#181818;stroke-width:0.5208333333333334;" width="146.875" x="630.2083" y="6.25"/><text fill="#000000" font-family="sans-serif" font-size="16.6667" font-weight="bold" lengthAdjust="spacing" textLength="135.4167" x="633.3333" y="21.7204">FHIR-Directory</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="5.2083" x="768.75" y="22.4574">&#160;</text><rect fill="#FFFFFF" height="453.5319" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="213.0208" y="72.8353"/><rect fill="#FFFFFF" height="285.7585" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="698.4375" y="240.6087"/><rect fill="#FFFFFF" height="72.88" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="1552.6042" y="121.6187"/><rect fill="#FFFFFF" height="46.11" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="1552.6042" y="374.4954"/><line style="stroke:#181818;stroke-width:0.5208333333333334;stroke-dasharray:5.0,5.0;" x1="217.7083" x2="217.7083" y1="62.4186" y2="545.1172"/><line style="stroke:#181818;stroke-width:0.5208333333333334;stroke-dasharray:5.0,5.0;" x1="703.125" x2="703.125" y1="62.4186" y2="545.1172"/><line style="stroke:#181818;stroke-width:0.5208333333333334;stroke-dasharray:5.0,5.0;" x1="1557.8125" x2="1557.8125" y1="62.4186" y2="545.1172"/><rect fill="#E3E3E3" height="31.5592" rx="2.6042" ry="2.6042" style="stroke:#181818;stroke-width:0.5208333333333334;" width="159.375" x="138.5417" y="29.8177"/><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="144.7917" x="145.8333" y="50.646">TI-Messenger-Client</text><rect fill="#E3E3E3" height="31.5592" rx="2.6042" ry="2.6042" style="stroke:#181818;stroke-width:0.5208333333333334;" width="159.375" x="138.5417" y="544.0755"/><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="144.7917" x="145.8333" y="564.9038">TI-Messenger-Client</text><rect fill="#E3E3E3" height="31.5592" rx="2.6042" ry="2.6042" style="stroke:#181818;stroke-width:0.5208333333333334;" width="105.2083" x="651.0417" y="29.8177"/><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="90.625" x="658.3333" y="50.646">Auth-Service</text><rect fill="#E3E3E3" height="31.5592" rx="2.6042" ry="2.6042" style="stroke:#181818;stroke-width:0.5208333333333334;" width="105.2083" x="651.0417" y="544.0755"/><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="90.625" x="658.3333" y="564.9038">Auth-Service</text><rect fill="#E3E3E3" height="48.5352" rx="2.6042" ry="2.6042" style="stroke:#181818;stroke-width:0.5208333333333334;" width="170.8333" x="1472.3958" y="12.8418"/><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="156.25" x="1479.6875" y="33.67">TI-Messenger-Service</text><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="125" x="1495.3125" y="50.646">Messenger-Proxy</text><rect fill="#E3E3E3" height="48.5352" rx="2.6042" ry="2.6042" style="stroke:#181818;stroke-width:0.5208333333333334;" width="170.8333" x="1472.3958" y="544.0755"/><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="156.25" x="1479.6875" y="564.9038">TI-Messenger-Service</text><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="125" x="1495.3125" y="581.8797">Messenger-Proxy</text><rect fill="#FFFFFF" height="453.5319" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="213.0208" y="72.8353"/><rect fill="#FFFFFF" height="285.7585" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="698.4375" y="240.6087"/><rect fill="#FFFFFF" height="72.88" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="1552.6042" y="121.6187"/><rect fill="#FFFFFF" height="46.11" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="1552.6042" y="374.4954"/><polygon fill="#181818" points="1540.1042,117.452,1550.5208,121.6187,1540.1042,125.7853,1544.2708,121.6187" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="223.4375" x2="1546.3542" y1="121.6187" y2="121.6187"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="230.7292" y="116.3417">[01]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="396.875" x="266.1458" y="116.3417">POST /_matrix/client/v3/user/{userId}/openid/request_token</text><path d="M5.2083,78.0436 L5.2083,150.9603 L208.3333,150.9603 L208.3333,88.4603 L197.9167,78.0436 L5.2083,78.0436 " fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5208333333333334;"/><path d="M197.9167,78.0436 L197.9167,88.4603 L208.3333,88.4603 L197.9167,78.0436 " fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5208333333333334;"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="86.4583" x="11.4583" y="95.8216">Precondition:</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="23.9583" x="11.4583" y="111.585">The</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="4.1667" x="35.4167" y="111.585">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="29.1667" x="39.5833" y="111.585">user</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="4.1667" x="68.75" y="111.585">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="10.4167" x="72.9167" y="111.585">is</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="4.1667" x="83.3333" y="111.585">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="44.7917" x="87.5" y="111.585">logged</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="4.1667" x="132.2917" y="111.585">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="11.4583" x="136.4583" y="111.585">in</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="4.1667" x="147.9167" y="111.585">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="11.4583" x="152.0833" y="111.585">&amp;</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="4.1667" x="163.5417" y="111.585">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="16.6667" x="167.7083" y="111.585">no</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="133.3333" x="11.4583" y="127.3483">search-accesstoken</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="4.1667" x="144.7917" y="127.3483">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="17.7083" x="148.9583" y="127.3483">for</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="4.1667" x="166.6667" y="127.3483">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="21.875" x="170.8333" y="127.3483">the</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="94.7917" x="11.4583" y="143.1117">FHIR-Directory</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="4.1667" x="106.25" y="143.1117">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="38.5417" x="110.4167" y="143.1117">exists</text><polygon fill="#181818" points="234.8958,190.332,224.4792,194.4987,234.8958,198.6654,230.7292,194.4987" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;stroke-dasharray:2.0,2.0;" x1="228.6458" x2="1556.7708" y1="194.4987" y2="194.4987"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="241.1458" y="181.34">[02]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="500" x="276.5625" y="173.4584">HTTP 200 OK, Result body {"access_token": "OFdZNozDIomXLrCWjgejIQBM"</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="344.7917" x="280.7292" y="189.2217">,..., "matrix_server_name": "matrix.service-ti.de",...}</text><polygon fill="#181818" points="685.9375,236.4421,696.3542,240.6087,685.9375,244.7754,690.1042,240.6087" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="223.4375" x2="692.1875" y1="240.6087" y2="240.6087"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="230.7292" y="227.4501">[03]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="330.2083" x="266.1458" y="219.5684">GET /tim-authenticate?mxId=matrix.service-ti.de"</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="388.5417" x="270.3125" y="235.3317">-H "X-Matrix-OpenID-Token: OFdZNozDIomXLrCWjgejIQBM"</text><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="708.8542" x2="752.6042" y1="286.7188" y2="286.7188"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="752.6042" x2="752.6042" y1="286.7188" y2="300.2604"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="709.8958" x2="752.6042" y1="300.2604" y2="300.2604"/><polygon fill="#181818" points="720.3125,296.0938,709.8958,300.2604,720.3125,304.4271,716.1458,300.2604" style="stroke:#181818;stroke-width:1.0416666666666667;"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="716.1458" y="273.5601">[04]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="328.125" x="751.5625" y="265.6784">Check that matrix server url "matrix.service-ti.de"</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="179.1667" x="755.7292" y="281.4418">is part of the federation list</text><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="708.8542" x2="752.6042" y1="330.6071" y2="330.6071"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="752.6042" x2="752.6042" y1="330.6071" y2="344.1488"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="709.8958" x2="752.6042" y1="344.1488" y2="344.1488"/><polygon fill="#181818" points="720.3125,339.9821,709.8958,344.1488,720.3125,348.3154,716.1458,344.1488" style="stroke:#181818;stroke-width:1.0416666666666667;"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="716.1458" y="325.3301">[05]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="257.2917" x="751.5625" y="325.3301">lookup PORT for given matrix server url</text><polygon fill="#181818" points="1540.1042,370.3288,1550.5208,374.4954,1540.1042,378.6621,1544.2708,374.4954" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="708.8542" x2="1546.3542" y1="374.4954" y2="374.4954"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="716.1458" y="369.2184">[06]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="771.875" x="751.5625" y="369.2184">GET matrix.service-ti.de:{PORT}/_matrix/federation/v1/openid/userinfo?access_token=OFdZNozDIomXLrCWjgejIQBM</text><polygon fill="#181818" points="720.3125,416.4388,709.8958,420.6055,720.3125,424.7721,716.1458,420.6055" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;stroke-dasharray:2.0,2.0;" x1="714.0625" x2="1556.7708" y1="420.6055" y2="420.6055"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="726.5625" y="407.4468">[07]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="85.4167" x="761.9792" y="399.5651">HTTP 200 OK</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="353.125" x="761.9792" y="415.3285">Result Body {"sub": "@testuser:matrix.service-ti.de"}</text><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="708.8542" x2="752.6042" y1="450.9521" y2="450.9521"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="752.6042" x2="752.6042" y1="450.9521" y2="464.4938"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="709.8958" x2="752.6042" y1="464.4938" y2="464.4938"/><polygon fill="#181818" points="720.3125,460.3271,709.8958,464.4938,720.3125,468.6605,716.1458,464.4938" style="stroke:#181818;stroke-width:1.0416666666666667;"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="716.1458" y="445.6752">[08]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="339.5833" x="751.5625" y="445.6752">Create search-accesstoken for TI-Messenger-Client</text><polygon fill="#181818" points="229.6875,522.2005,219.2708,526.3672,229.6875,530.5339,225.5208,526.3672" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;stroke-dasharray:2.0,2.0;" x1="223.4375" x2="702.6042" y1="526.3672" y2="526.3672"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="235.9375" y="505.3268">[09]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="170.8333" x="271.3542" y="489.5635">HTTP 200 OK, Result body</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="397.9167" x="271.3542" y="505.3268">{"access_token"="eyJ0eXAiOiJKV1...", "token_type":"bearer",</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="131.25" x="271.3542" y="521.0902">"expires_in":86400}</text></g></svg>