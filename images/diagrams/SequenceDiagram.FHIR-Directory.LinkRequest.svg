<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1646.875px" preserveAspectRatio="none" style="width:1733px;height:1646px;background:#FFFFFF;" version="1.1" viewBox="0 0 1733 1646" width="1733.3333px" zoomAndPan="magnify"><defs/><g><rect fill="#F5F5F5" height="1635.4085" style="stroke:#181818;stroke-width:0.5208333333333334;" width="540.1042" x="984.8958" y="6.25"/><text fill="#000000" font-family="sans-serif" font-size="16.6667" font-weight="bold" lengthAdjust="spacing" textLength="135.4167" x="1184.6354" y="21.7204">FHIR-Directory</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="5.2083" x="1320.0521" y="22.4574"> </text><rect fill="#FFFFFF" height="1407.43" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="461.4583" y="132.8776"/><rect fill="#FFFFFF" height="221.5983" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="1029.1667" y="204.126"/><rect fill="#FFFFFF" height="221.5983" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="1029.1667" y="511.556"/><rect fill="#FFFFFF" height="46.11" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="1256.25" y="303.4993"/><rect fill="#FFFFFF" height="46.11" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="1256.25" y="610.9294"/><rect fill="#FFFFFF" height="204.7933" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="1420.3125" y="803.2227"/><rect fill="#FFFFFF" height="249.6582" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="1420.3125" y="1245.7194"/><rect fill="none" height="292.8467" style="stroke:#000000;stroke-width:1.5625;" width="959.375" x="381.25" y="148.5026"/><rect fill="none" height="170.4183" style="stroke:#000000;stroke-width:1.5625;" width="938.5417" x="391.6667" y="263.6393"/><rect fill="none" height="292.8467" style="stroke:#000000;stroke-width:1.5625;" width="959.375" x="381.25" y="455.9326"/><rect fill="none" height="170.4183" style="stroke:#000000;stroke-width:1.5625;" width="938.5417" x="391.6667" y="571.0693"/><rect fill="none" height="260.2783" style="stroke:#000000;stroke-width:1.5625;" width="1300.5208" x="381.25" y="763.3626"/><rect fill="none" height="153.6133" style="stroke:#000000;stroke-width:1.5625;" width="1279.6875" x="391.6667" y="862.736"/><rect fill="none" height="305.1432" style="stroke:#000000;stroke-width:1.5625;" width="1346.3542" x="381.25" y="1205.8594"/><rect fill="none" height="166.9515" style="stroke:#000000;stroke-width:1.5625;" width="1325.5208" x="391.6667" y="1336.7594"/><line style="stroke:#181818;stroke-width:0.5208333333333334;stroke-dasharray:5.0,5.0;" x1="32.2917" x2="32.2917" y1="84.6842" y2="1559.0576"/><line style="stroke:#181818;stroke-width:0.5208333333333334;stroke-dasharray:5.0,5.0;" x1="466.6667" x2="466.6667" y1="84.6842" y2="1559.0576"/><line style="stroke:#181818;stroke-width:0.5208333333333334;stroke-dasharray:5.0,5.0;" x1="1033.8542" x2="1033.8542" y1="84.6842" y2="1559.0576"/><line style="stroke:#181818;stroke-width:0.5208333333333334;stroke-dasharray:5.0,5.0;" x1="1261.4583" x2="1261.4583" y1="84.6842" y2="1559.0576"/><line style="stroke:#181818;stroke-width:0.5208333333333334;stroke-dasharray:5.0,5.0;" x1="1425" x2="1425" y1="84.6842" y2="1559.0576"/><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="47.9167" x="5.2083" y="81.2449">Nutzer</text><ellipse cx="32.2917" cy="14.0625" fill="#E3E3E3" rx="8.3333" ry="8.3333" style="stroke:#181818;stroke-width:0.5208333333333334;"/><path d="M32.2917,22.3958 L32.2917,50.5208 M18.75,30.7292 L45.8333,30.7292 M32.2917,50.5208 L18.75,66.1458 M32.2917,50.5208 L45.8333,66.1458 " fill="none" style="stroke:#181818;stroke-width:0.5208333333333334;"/><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="47.9167" x="5.2083" y="1571.5525">Nutzer</text><ellipse cx="32.2917" cy="1583.846" fill="#E3E3E3" rx="8.3333" ry="8.3333" style="stroke:#181818;stroke-width:0.5208333333333334;"/><path d="M32.2917,1592.1794 L32.2917,1620.3044 M18.75,1600.5127 L45.8333,1600.5127 M32.2917,1620.3044 L18.75,1635.9294 M32.2917,1620.3044 L45.8333,1635.9294 " fill="none" style="stroke:#181818;stroke-width:0.5208333333333334;"/><rect fill="#E3E3E3" height="31.5592" rx="2.6042" ry="2.6042" style="stroke:#181818;stroke-width:0.5208333333333334;" width="129.1667" x="402.0833" y="52.0833"/><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="114.5833" x="409.375" y="72.9116">FHIR-VZD-Client</text><rect fill="#E3E3E3" height="31.5592" rx="2.6042" ry="2.6042" style="stroke:#181818;stroke-width:0.5208333333333334;" width="129.1667" x="402.0833" y="1558.016"/><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="114.5833" x="409.375" y="1578.8442">FHIR-VZD-Client</text><rect fill="#E3E3E3" height="31.5592" rx="2.6042" ry="2.6042" style="stroke:#181818;stroke-width:0.5208333333333334;" width="90.625" x="989.0625" y="52.0833"/><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="76.0417" x="996.3542" y="72.9116">FHIR-Proxy</text><rect fill="#E3E3E3" height="31.5592" rx="2.6042" ry="2.6042" style="stroke:#181818;stroke-width:0.5208333333333334;" width="90.625" x="989.0625" y="1558.016"/><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="76.0417" x="996.3542" y="1578.8442">FHIR-Proxy</text><rect fill="#E3E3E3" height="31.5592" rx="2.6042" ry="2.6042" style="stroke:#181818;stroke-width:0.5208333333333334;" width="116.6667" x="1203.125" y="52.0833"/><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="102.0833" x="1210.4167" y="72.9116">FHIR-Directory</text><rect fill="#E3E3E3" height="31.5592" rx="2.6042" ry="2.6042" style="stroke:#181818;stroke-width:0.5208333333333334;" width="116.6667" x="1203.125" y="1558.016"/><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="102.0833" x="1210.4167" y="1578.8442">FHIR-Directory</text><rect fill="#E3E3E3" height="31.5592" rx="2.6042" ry="2.6042" style="stroke:#181818;stroke-width:0.5208333333333334;" width="190.625" x="1330.2083" y="52.0833"/><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="176.0417" x="1337.5" y="72.9116">FHIR-VZD-Administration</text><rect fill="#E3E3E3" height="31.5592" rx="2.6042" ry="2.6042" style="stroke:#181818;stroke-width:0.5208333333333334;" width="190.625" x="1330.2083" y="1558.016"/><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="176.0417" x="1337.5" y="1578.8442">FHIR-VZD-Administration</text><rect fill="#FFFFFF" height="1407.43" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="461.4583" y="132.8776"/><rect fill="#FFFFFF" height="221.5983" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="1029.1667" y="204.126"/><rect fill="#FFFFFF" height="221.5983" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="1029.1667" y="511.556"/><rect fill="#FFFFFF" height="46.11" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="1256.25" y="303.4993"/><rect fill="#FFFFFF" height="46.11" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="1256.25" y="610.9294"/><rect fill="#FFFFFF" height="204.7933" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="1420.3125" y="803.2227"/><rect fill="#FFFFFF" height="249.6582" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="1420.3125" y="1245.7194"/><polygon fill="#181818" points="448.9583,128.7109,459.375,132.8776,448.9583,137.0443,453.125,132.8776" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="32.2917" x2="455.2083" y1="132.8776" y2="132.8776"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="39.5833" y="119.7189">[01]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="165.625" x="75" y="111.8373">Start Verlinkungsanfrage</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="373.9583" x="75" y="127.6006">mit Suche nach der zu verlinkenden Partner-Ressourcen</text><path d="M381.25,148.5026 L893.75,148.5026 L893.75,155.9326 L883.3333,166.3493 L381.25,166.3493 L381.25,148.5026 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5625;"/><rect fill="none" height="292.8467" style="stroke:#000000;stroke-width:1.5625;" width="959.375" x="381.25" y="148.5026"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="465.625" x="396.875" y="162.114">Suche aller eigenen Ressourcen, die verlinkt werden können</text><polygon fill="#181818" points="1016.6667,199.9593,1027.0833,204.126,1016.6667,208.2926,1020.8333,204.126" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="471.875" x2="1022.9167" y1="204.126" y2="204.126"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="479.1667" y="190.9673">[02]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="497.9167" x="514.5833" y="183.0856">GET /owner?... (Suche alle eigenen HealthcareService oder PractitionerRole</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="257.2917" x="514.5833" y="198.849">mit telematikID aus dem accesstoken)</text><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="1039.5833" x2="1083.3333" y1="234.4727" y2="234.4727"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="1083.3333" x2="1083.3333" y1="234.4727" y2="248.0143"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="1040.625" x2="1083.3333" y1="248.0143" y2="248.0143"/><polygon fill="#181818" points="1051.0417,243.8477,1040.625,248.0143,1051.0417,252.181,1046.875,248.0143" style="stroke:#181818;stroke-width:1.0416666666666667;"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="1046.875" y="229.1957">[03]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="166.6667" x="1082.2917" y="229.1957">prüfe owner-accesstoken</text><path d="M391.6667,263.6393 L458.3333,263.6393 L458.3333,271.0693 L447.9167,281.486 L391.6667,281.486 L391.6667,263.6393 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5625;"/><rect fill="none" height="170.4183" style="stroke:#000000;stroke-width:1.5625;" width="938.5417" x="391.6667" y="263.6393"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="19.7917" x="407.2917" y="277.2507">alt</text><text fill="#000000" font-family="sans-serif" font-size="11.4583" font-weight="bold" lengthAdjust="spacing" textLength="145.8333" x="473.9583" y="276.3585">[accesstoken is valid]</text><polygon fill="#181818" points="1243.75,299.3327,1254.1667,303.4993,1243.75,307.666,1247.9167,303.4993" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="1039.5833" x2="1250" y1="303.4993" y2="303.4993"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="1046.875" y="298.2224">[04]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="54.1667" x="1082.2917" y="298.2224">GET /?...</text><polygon fill="#181818" points="1051.0417,345.4427,1040.625,349.6094,1051.0417,353.776,1046.875,349.6094" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;stroke-dasharray:2.0,2.0;" x1="1044.7917" x2="1260.4167" y1="349.6094" y2="349.6094"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="1057.2917" y="336.4507">[05]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="85.4167" x="1092.7083" y="328.569">HTTP 200 OK</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="119.7917" x="1092.7083" y="344.3324">(Result Body json)</text><polygon fill="#181818" points="483.3333,375.7894,472.9167,379.9561,483.3333,384.1227,479.1667,379.9561" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;stroke-dasharray:2.0,2.0;" x1="477.0833" x2="1028.125" y1="379.9561" y2="379.9561"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="489.5833" y="374.6791">[06]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="209.375" x="525" y="374.6791">HTTP 200 OK (Result Body json)</text><line style="stroke:#000000;stroke-width:1.0416666666666667;stroke-dasharray:2.0,2.0;" x1="391.6667" x2="1330.2083" y1="389.3311" y2="389.3311"/><text fill="#000000" font-family="sans-serif" font-size="11.4583" font-weight="bold" lengthAdjust="spacing" textLength="208.3333" x="396.875" y="399.9669">[search-accesstoken is invalid]</text><polygon fill="#181818" points="483.3333,421.5576,472.9167,425.7243,483.3333,429.891,479.1667,425.7243" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;stroke-dasharray:2.0,2.0;" x1="477.0833" x2="1033.3333" y1="425.7243" y2="425.7243"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="489.5833" y="420.4473">[07]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="62.5" x="525" y="420.4473">HTTP 401</text><path d="M381.25,455.9326 L889.5833,455.9326 L889.5833,463.3626 L879.1667,473.7793 L381.25,473.7793 L381.25,455.9326 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5625;"/><rect fill="none" height="292.8467" style="stroke:#000000;stroke-width:1.5625;" width="959.375" x="381.25" y="455.9326"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="461.4583" x="396.875" y="469.544">Suche aller Partner Ressourcen, die verlinkt werden können</text><polygon fill="#181818" points="1016.6667,507.3893,1027.0833,511.556,1016.6667,515.7227,1020.8333,511.556" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="471.875" x2="1022.9167" y1="511.556" y2="511.556"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="479.1667" y="498.3973">[08]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="268.75" x="514.5833" y="490.5156">GET /owner?... (Mit Nutzer Suchstring für</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="322.9167" x="514.5833" y="506.279">Partner HealthcareService oder PractitionerRole)</text><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="1039.5833" x2="1083.3333" y1="541.9027" y2="541.9027"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="1083.3333" x2="1083.3333" y1="541.9027" y2="555.4443"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="1040.625" x2="1083.3333" y1="555.4443" y2="555.4443"/><polygon fill="#181818" points="1051.0417,551.2777,1040.625,555.4443,1051.0417,559.611,1046.875,555.4443" style="stroke:#181818;stroke-width:1.0416666666666667;"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="1046.875" y="536.6257">[09]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="166.6667" x="1082.2917" y="536.6257">prüfe owner-accesstoken</text><path d="M391.6667,571.0693 L458.3333,571.0693 L458.3333,578.4993 L447.9167,588.916 L391.6667,588.916 L391.6667,571.0693 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5625;"/><rect fill="none" height="170.4183" style="stroke:#000000;stroke-width:1.5625;" width="938.5417" x="391.6667" y="571.0693"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="19.7917" x="407.2917" y="584.6807">alt</text><text fill="#000000" font-family="sans-serif" font-size="11.4583" font-weight="bold" lengthAdjust="spacing" textLength="145.8333" x="473.9583" y="583.7886">[accesstoken is valid]</text><polygon fill="#181818" points="1243.75,606.7627,1254.1667,610.9294,1243.75,615.096,1247.9167,610.9294" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="1039.5833" x2="1250" y1="610.9294" y2="610.9294"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="1046.875" y="605.6524">[10]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="54.1667" x="1082.2917" y="605.6524">GET /?...</text><polygon fill="#181818" points="1051.0417,652.8727,1040.625,657.0394,1051.0417,661.2061,1046.875,657.0394" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;stroke-dasharray:2.0,2.0;" x1="1044.7917" x2="1260.4167" y1="657.0394" y2="657.0394"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="1057.2917" y="643.8807">[11]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="85.4167" x="1092.7083" y="635.999">HTTP 200 OK</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="119.7917" x="1092.7083" y="651.7624">(Result Body json)</text><polygon fill="#181818" points="483.3333,683.2194,472.9167,687.3861,483.3333,691.5527,479.1667,687.3861" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;stroke-dasharray:2.0,2.0;" x1="477.0833" x2="1028.125" y1="687.3861" y2="687.3861"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="489.5833" y="682.1091">[12]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="209.375" x="525" y="682.1091">HTTP 200 OK (Result Body json)</text><line style="stroke:#000000;stroke-width:1.0416666666666667;stroke-dasharray:2.0,2.0;" x1="391.6667" x2="1330.2083" y1="696.7611" y2="696.7611"/><text fill="#000000" font-family="sans-serif" font-size="11.4583" font-weight="bold" lengthAdjust="spacing" textLength="208.3333" x="396.875" y="707.397">[search-accesstoken is invalid]</text><polygon fill="#181818" points="483.3333,728.9876,472.9167,733.1543,483.3333,737.321,479.1667,733.1543" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;stroke-dasharray:2.0,2.0;" x1="477.0833" x2="1033.3333" y1="733.1543" y2="733.1543"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="489.5833" y="727.8773">[13]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="62.5" x="525" y="727.8773">HTTP 401</text><path d="M381.25,763.3626 L741.6667,763.3626 L741.6667,770.7926 L731.25,781.2093 L381.25,781.2093 L381.25,763.3626 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5625;"/><rect fill="none" height="260.2783" style="stroke:#000000;stroke-width:1.5625;" width="1300.5208" x="381.25" y="763.3626"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="313.5417" x="396.875" y="776.974">Lese alle vorhandenen Verlinkungsdaten</text><polygon fill="#181818" points="1407.8125,799.056,1418.2292,803.2227,1407.8125,807.3893,1411.9792,803.2227" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="471.875" x2="1414.0625" y1="803.2227" y2="803.2227"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="479.1667" y="797.9457">[14]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="187.5" x="514.5833" y="797.9457">getPersonInstitutionLinks {}</text><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="1430.7292" x2="1474.4792" y1="833.5693" y2="833.5693"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="1474.4792" x2="1474.4792" y1="833.5693" y2="847.111"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="1431.7708" x2="1474.4792" y1="847.111" y2="847.111"/><polygon fill="#181818" points="1442.1875,842.9443,1431.7708,847.111,1442.1875,851.2777,1438.0208,847.111" style="stroke:#181818;stroke-width:1.0416666666666667;"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="1438.0208" y="828.2923">[15]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="166.6667" x="1473.4375" y="828.2923">prüfe owner-accesstoken</text><path d="M391.6667,862.736 L458.3333,862.736 L458.3333,870.166 L447.9167,880.5827 L391.6667,880.5827 L391.6667,862.736 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5625;"/><rect fill="none" height="153.6133" style="stroke:#000000;stroke-width:1.5625;" width="1279.6875" x="391.6667" y="862.736"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="19.7917" x="407.2917" y="876.3474">alt</text><text fill="#000000" font-family="sans-serif" font-size="11.4583" font-weight="bold" lengthAdjust="spacing" textLength="145.8333" x="473.9583" y="875.4552">[accesstoken is valid]</text><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="1430.7292" x2="1474.4792" y1="902.596" y2="902.596"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="1474.4792" x2="1474.4792" y1="902.596" y2="916.1377"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="1431.7708" x2="1474.4792" y1="916.1377" y2="916.1377"/><polygon fill="#181818" points="1442.1875,911.971,1431.7708,916.1377,1442.1875,920.3044,1438.0208,916.1377" style="stroke:#181818;stroke-width:1.0416666666666667;"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="1438.0208" y="897.319">[16]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="185.4167" x="1473.4375" y="897.319">Lesen der Verlinkungsdaten</text><polygon fill="#181818" points="483.3333,958.0811,472.9167,962.2477,483.3333,966.4144,479.1667,962.2477" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;stroke-dasharray:2.0,2.0;" x1="477.0833" x2="1419.2708" y1="962.2477" y2="962.2477"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="489.5833" y="949.0891">[17]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="85.4167" x="525" y="941.2074">HTTP 200 OK</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="119.7917" x="525" y="956.9707">(Result Body json)</text><line style="stroke:#000000;stroke-width:1.0416666666666667;stroke-dasharray:2.0,2.0;" x1="391.6667" x2="1671.3542" y1="971.6227" y2="971.6227"/><text fill="#000000" font-family="sans-serif" font-size="11.4583" font-weight="bold" lengthAdjust="spacing" textLength="205.2083" x="396.875" y="982.2586">[owner-accesstoken is invalid]</text><polygon fill="#181818" points="483.3333,1003.8493,472.9167,1008.016,483.3333,1012.1826,479.1667,1008.016" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;stroke-dasharray:2.0,2.0;" x1="477.0833" x2="1424.4792" y1="1008.016" y2="1008.016"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="489.5833" y="1002.739">[18]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="62.5" x="525" y="1002.739">HTTP 401</text><polygon fill="#181818" points="43.75,1080.306,33.3333,1084.4727,43.75,1088.6393,39.5833,1084.4727" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;stroke-dasharray:2.0,2.0;" x1="37.5" x2="460.4167" y1="1084.4727" y2="1084.4727"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="50" y="1063.4323">[19]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="306.25" x="85.4167" y="1047.669">Anzeige aller eigenen und Partner Ressourcen</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="269.7917" x="85.4167" y="1063.4323">(HealthcareService und PractitionerRole)</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="239.5833" x="85.4167" y="1079.1957">sowie vorhandene Verlinkungsdaten</text><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="32.2917" x2="76.0417" y1="1114.8193" y2="1114.8193"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="76.0417" x2="76.0417" y1="1114.8193" y2="1128.361"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="33.3333" x2="76.0417" y1="1128.361" y2="1128.361"/><polygon fill="#181818" points="43.75,1124.1943,33.3333,1128.361,43.75,1132.5277,39.5833,1128.361" style="stroke:#181818;stroke-width:1.0416666666666667;"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="39.5833" y="1109.5423">[20]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="289.5833" x="75" y="1109.5423">Auswahl der zu zu verlinkenden Ressourcen</text><polygon fill="#181818" points="448.9583,1186.0677,459.375,1190.2344,448.9583,1194.401,453.125,1190.2344" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="32.2917" x2="455.2083" y1="1190.2344" y2="1190.2344"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="39.5833" y="1169.194">[21]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="128.125" x="75" y="1153.4307">Verlinkungsanfrage</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="198.9583" x="75" y="1169.194">mit ausgewählten Ressourcen</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="251.0417" x="75" y="1184.9574">{HealthcareService, PractitionerRole}</text><path d="M381.25,1205.8594 L582.2917,1205.8594 L582.2917,1213.2894 L571.875,1223.7061 L381.25,1223.7061 L381.25,1205.8594 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5625;"/><rect fill="none" height="305.1432" style="stroke:#000000;stroke-width:1.5625;" width="1346.3542" x="381.25" y="1205.8594"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="154.1667" x="396.875" y="1219.4707">VerlinkungsRequest</text><polygon fill="#181818" points="1407.8125,1241.5527,1418.2292,1245.7194,1407.8125,1249.8861,1411.9792,1245.7194" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="471.875" x2="1414.0625" y1="1245.7194" y2="1245.7194"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="479.1667" y="1240.4424">[22]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="445.8333" x="514.5833" y="1240.4424">suggestPersonInstitutionLink {HealthcareService, PractitionerRole}</text><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="1430.7292" x2="1474.4792" y1="1307.5928" y2="1307.5928"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="1474.4792" x2="1474.4792" y1="1307.5928" y2="1321.1344"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="1431.7708" x2="1474.4792" y1="1321.1344" y2="1321.1344"/><polygon fill="#181818" points="1442.1875,1316.9678,1431.7708,1321.1344,1442.1875,1325.3011,1438.0208,1321.1344" style="stroke:#181818;stroke-width:1.0416666666666667;"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="1438.0208" y="1286.5524">[23]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="166.6667" x="1473.4375" y="1270.7891">prüfe owner-accesstoken</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="229.1667" x="1473.4375" y="1286.5524">&amp; Prüfe, dass eine der Ressourcen</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="169.7917" x="1473.4375" y="1302.3158">eine eigene Ressource ist</text><path d="M391.6667,1336.7594 L458.3333,1336.7594 L458.3333,1344.1895 L447.9167,1354.6061 L391.6667,1354.6061 L391.6667,1336.7594 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5625;"/><rect fill="none" height="166.9515" style="stroke:#000000;stroke-width:1.5625;" width="1325.5208" x="391.6667" y="1336.7594"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="19.7917" x="407.2917" y="1350.3708">alt</text><text fill="#000000" font-family="sans-serif" font-size="11.4583" font-weight="bold" lengthAdjust="spacing" textLength="145.8333" x="473.9583" y="1349.4787">[accesstoken is valid]</text><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="1430.7292" x2="1474.4792" y1="1376.6195" y2="1376.6195"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="1474.4792" x2="1474.4792" y1="1376.6195" y2="1390.1611"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="1431.7708" x2="1474.4792" y1="1390.1611" y2="1390.1611"/><polygon fill="#181818" points="1442.1875,1385.9945,1431.7708,1390.1611,1442.1875,1394.3278,1438.0208,1390.1611" style="stroke:#181818;stroke-width:1.0416666666666667;"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="1438.0208" y="1371.3425">[24]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="231.25" x="1473.4375" y="1371.3425">Eintragen des Verlinkungsrequests</text><polygon fill="#181818" points="483.3333,1432.1045,472.9167,1436.2712,483.3333,1440.4378,479.1667,1436.2712" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;stroke-dasharray:2.0,2.0;" x1="477.0833" x2="1419.2708" y1="1436.2712" y2="1436.2712"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="489.5833" y="1423.1125">[25]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="85.4167" x="525" y="1415.2308">HTTP 200 OK</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="119.7917" x="525" y="1430.9942">(Result Body json)</text><line style="stroke:#000000;stroke-width:1.0416666666666667;stroke-dasharray:2.0,2.0;" x1="391.6667" x2="1717.1875" y1="1445.6462" y2="1445.6462"/><text fill="#000000" font-family="sans-serif" font-size="11.4583" font-weight="bold" lengthAdjust="spacing" textLength="200" x="396.875" y="1456.282">[owner-accesstoken is invalid</text><text fill="#000000" font-family="sans-serif" font-size="11.4583" font-weight="bold" lengthAdjust="spacing" textLength="281.25" x="396.875" y="1469.6203">oder keine eigene Ressource ausgewählt]</text><polygon fill="#181818" points="483.3333,1491.2109,472.9167,1495.3776,483.3333,1499.5443,479.1667,1495.3776" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;stroke-dasharray:2.0,2.0;" x1="477.0833" x2="1424.4792" y1="1495.3776" y2="1495.3776"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="489.5833" y="1490.1006">[26]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="62.5" x="525" y="1490.1006">HTTP 401</text><polygon fill="#181818" points="43.75,1536.141,33.3333,1540.3076,43.75,1544.4743,39.5833,1540.3076" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="37.5" x2="465.625" y1="1540.3076" y2="1540.3076"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="50" y="1535.0306">[27]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="189.5833" x="85.4167" y="1535.0306">Ergebnis Verlinkungsanfrage</text><!--MD5=[b51db8a3e8b7312801c0c5d11cabd637]
@startuml SequenceDiagram.FHIR-Directory.linkRequest
skinparam dpi 100
skinparam WrapWidth 200
skinparam monochrome true
autonumber "<b>[00]"

'title "FHIR-Directory, Sequenzdiagram link request'
actor Nutzer
participant cl as "FHIR-VZD-Client"
box <size:16>FHIR-Directory</size> #WhiteSmoke
  participant fp as "FHIR-Proxy"
  participant fd as "FHIR-Directory"
  participant fa as "FHIR-VZD-Administration"
end box

Nutzer -> cl:Start Verlinkungsanfrage \nmit Suche nach der zu verlinkenden Partner-Ressourcen
activate cl

group Suche aller eigenen Ressourcen, die verlinkt werden können
  cl -> fp: GET /owner?... (Suche alle eigenen HealthcareService oder PractitionerRole \nmit telematikID aus dem accesstoken)
  activate fp
  fp -> fp: prüfe owner-accesstoken

    alt accesstoken is valid
      fp -> fd: GET /?...
      activate fd
      fd - -> fp: HTTP 200 OK\n(Result Body json)
      deactivate fd
      fp - -> cl: HTTP 200 OK (Result Body json)
     else search-accesstoken is invalid
      fp - -> cl: HTTP 401
      deactivate fp
     end
end

group Suche aller Partner Ressourcen, die verlinkt werden können
  cl -> fp: GET /owner?... (Mit Nutzer Suchstring für \nPartner HealthcareService oder PractitionerRole)
  activate fp
  fp -> fp: prüfe owner-accesstoken

    alt accesstoken is valid
      fp -> fd: GET /?...
      activate fd
      fd - -> fp: HTTP 200 OK\n(Result Body json)
      deactivate fd
      fp - -> cl: HTTP 200 OK (Result Body json)
     else search-accesstoken is invalid
      fp - -> cl: HTTP 401
      deactivate fp
     end
end

group Lese alle vorhandenen Verlinkungsdaten
  cl -> fa: getPersonInstitutionLinks {}
  activate fa
  fa -> fa: prüfe owner-accesstoken
    alt accesstoken is valid
      fa -> fa: Lesen der Verlinkungsdaten
      fa - -> cl: HTTP 200 OK\n(Result Body json)
      
     else owner-accesstoken is invalid
      fa - -> cl: HTTP 401
      deactivate fa
     end
end

cl - -> Nutzer:Anzeige aller eigenen und Partner Ressourcen \n(HealthcareService und PractitionerRole) \nsowie vorhandene Verlinkungsdaten
Nutzer -> Nutzer: Auswahl der zu zu verlinkenden Ressourcen
Nutzer -> cl: Verlinkungsanfrage \nmit ausgewählten Ressourcen \n{HealthcareService, PractitionerRole}

group VerlinkungsRequest
  cl -> fa: suggestPersonInstitutionLink {HealthcareService, PractitionerRole}
  activate fa
  fa -> fa: prüfe owner-accesstoken\n& Prüfe, dass eine der Ressourcen \neine eigene Ressource ist

    alt accesstoken is valid
      fa -> fa: Eintragen des Verlinkungsrequests
      fa - -> cl: HTTP 200 OK\n(Result Body json)
      
     else owner-accesstoken is invalid\noder keine eigene Ressource ausgewählt
      fa - -> cl: HTTP 401
      deactivate fa
     end
end

cl -> Nutzer: Ergebnis Verlinkungsanfrage

deactivate cl

@enduml

@startuml SequenceDiagram.FHIR-Directory.linkRequest
skinparam dpi 100
skinparam WrapWidth 200
skinparam monochrome true
autonumber "<b>[00]"

actor Nutzer
participant cl as "FHIR-VZD-Client"
box <size:16>FHIR-Directory</size> #WhiteSmoke
  participant fp as "FHIR-Proxy"
  participant fd as "FHIR-Directory"
  participant fa as "FHIR-VZD-Administration"
end box

Nutzer -> cl:Start Verlinkungsanfrage \nmit Suche nach der zu verlinkenden Partner-Ressourcen
activate cl

group Suche aller eigenen Ressourcen, die verlinkt werden können
  cl -> fp: GET /owner?... (Suche alle eigenen HealthcareService oder PractitionerRole \nmit telematikID aus dem accesstoken)
  activate fp
  fp -> fp: prüfe owner-accesstoken

    alt accesstoken is valid
      fp -> fd: GET /?...
      activate fd
      fd - -> fp: HTTP 200 OK\n(Result Body json)
      deactivate fd
      fp - -> cl: HTTP 200 OK (Result Body json)
     else search-accesstoken is invalid
      fp - -> cl: HTTP 401
      deactivate fp
     end
end

group Suche aller Partner Ressourcen, die verlinkt werden können
  cl -> fp: GET /owner?... (Mit Nutzer Suchstring für \nPartner HealthcareService oder PractitionerRole)
  activate fp
  fp -> fp: prüfe owner-accesstoken

    alt accesstoken is valid
      fp -> fd: GET /?...
      activate fd
      fd - -> fp: HTTP 200 OK\n(Result Body json)
      deactivate fd
      fp - -> cl: HTTP 200 OK (Result Body json)
     else search-accesstoken is invalid
      fp - -> cl: HTTP 401
      deactivate fp
     end
end

group Lese alle vorhandenen Verlinkungsdaten
  cl -> fa: getPersonInstitutionLinks {}
  activate fa
  fa -> fa: prüfe owner-accesstoken
    alt accesstoken is valid
      fa -> fa: Lesen der Verlinkungsdaten
      fa - -> cl: HTTP 200 OK\n(Result Body json)
      
     else owner-accesstoken is invalid
      fa - -> cl: HTTP 401
      deactivate fa
     end
end

cl - -> Nutzer:Anzeige aller eigenen und Partner Ressourcen \n(HealthcareService und PractitionerRole) \nsowie vorhandene Verlinkungsdaten
Nutzer -> Nutzer: Auswahl der zu zu verlinkenden Ressourcen
Nutzer -> cl: Verlinkungsanfrage \nmit ausgewählten Ressourcen \n{HealthcareService, PractitionerRole}

group VerlinkungsRequest
  cl -> fa: suggestPersonInstitutionLink {HealthcareService, PractitionerRole}
  activate fa
  fa -> fa: prüfe owner-accesstoken\n& Prüfe, dass eine der Ressourcen \neine eigene Ressource ist

    alt accesstoken is valid
      fa -> fa: Eintragen des Verlinkungsrequests
      fa - -> cl: HTTP 200 OK\n(Result Body json)
      
     else owner-accesstoken is invalid\noder keine eigene Ressource ausgewählt
      fa - -> cl: HTTP 401
      deactivate fa
     end
end

cl -> Nutzer: Ergebnis Verlinkungsanfrage

deactivate cl

@enduml

PlantUML version 1.2022.13(Sat Nov 19 13:22:17 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>